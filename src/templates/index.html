{% extends "base.html" %}

{% block html_title %}Tweet Finder | DAGEAâ„¢{% endblock %}

{% block main_content %}
<!-- Title -->
<div class="container p-3">
	<div class="text-center">
		<h1 class="display-3 pb-2">GUI to search tweets</h1>
	</div>
</div>
<div class="container">
	<form class="d-flex justify-content-between align-items-center w-100" method="post">
		<div class="d-flex w-75">
			<input type="text" class="form-control" style="max-width: 60%" placeholder="Search tweets" name="keyword"
				id="keyword" value="{{ request.form['keyword'] }}">
			<div class="btn-group" role="group" aria-label="Basic radio toggle button group">
				<input type="radio" class="btn-check" name="btnradio" id="searchBtn" autocomplete="off" value="Search">
				<label class="btn btn-outline-primary bi-search" for="searchBtn" title="Search Tweets"></label>

				<input type="radio" class="btn-check" name="btnradio" id="streamBtn" autocomplete="off" value="Stream">
				<label class="btn btn-outline-danger bi-play-fill" for="streamBtn" title="Stream Tweets"></label>
			</div>
			<button type="submit" class="btn btn-success" style="margin: 1px;">Invia</button>
		</div>
		<!-- Research by -->
		<div class="d-flex m-3">
			<select name="researchBy" class="form-select-sm bg-dark text-light" aria-label="Select Research"
				style="min-width: 45%">
				{% for method in researchMethods %}
				{% if method.method == currentResearchMethod %}
				<option selected value="{{ method.method }}">{{ method.text }}</option>
				{% else %}
				<option value="{{ method.method }}">{{ method.text }}</option>
				{% endif %}
				{% endfor %}
			</select>
		</div>
		<div class="d-flex justify-content-around">
			<button class="btn btn-primary bi-filter" type="button" data-bs-toggle="collapse" data-bs-target="#filterId"
				aria-expanded="false" aria-controls="filterId">
			</button>
			<div class="collapse justify-content-between w-100" id="filterId">
				<div class="row align-items-center">
					<!-- Location check -->
					<div class="col-sm m-1">
						<div class="form-check form-switch align-items-center">
							<input class="form-check-input" type="checkbox" name="isLocated" />
							<label class="form-check-label" for="flexSwitchCheckDefault">Location</label>
						</div>
					</div>
					<br>
					<div class="col-sm m-1">
						<div class="btn-group dorpdown">
							<button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown">
								Date range
							</button>
							<ul class="dropdown-menu">
								<li>
									<div class="dropdown-item">
										<label for="start">Start date: </label>
										<input type="date" class="" id="startDate" value="" min="" max="">
									</div>
								</li>
								<li>
									<div class="dropdown-item">
										<label for="start">Date limit: </label>
										<input type="date" class="" id="limitDate" value="" min="" max="">
									</div>
								</li>
							</ul>
						</div>
					</div>
					<div class="form-outline ms-3 mt-4 col-sm m-1">
						<!-- <input required class="" id="tweetLimit" value="{{ tweetLimit }}" min="1" max="200"                name="tweetLimit" type="range" step="1" oninput="tweetLimitOutput.value = tweetLimit.value">
						<label class="text-info">How many tweets? <output id="tweetLimitOutput">1</output></label> -->
						<input class="form-control" id="tweetLimitInput" value="{{ tweetLimit }}" min="10" max="200"
							type="number" name="tweetLimit">
						<small class="form-text text-muted">Number of tweets to discover</small>
					</div>
				</div>
			</div>
		</div>
	</form>
</div>
<br><br>
<div class="row align-items-baseline justify-content-around h-100 w-100">
	<div class="col d-flex">
		<!-- Cards tweets -->
		<div class="container d-flex text-dark">
			<div class="row justify-content-center mb-3">
				{% for tweet in tweets %}
				<div class="col-lg-4">
					<div class="card" style="width: 90%; margin: 2pt">
						<!-- <img class="card-img-top bi-geo" alt="Card image" hidden="false"/> -->
						<div class="card-body" style="height: 100%">
							<h4 class="card-title">{{ tweet.user }}</h4>
							<p class="card-text">{{ tweet.tweet }}</p>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
	</div>
	<!-- Map -->
	<div class="card col d-flex bg-secondary h-100" style="margin: 2pt">
		<div class="card-body h-100">
			<h2 class="card-title">Tweet by Location</h2>
			<div class="map-container h-100" style="position: relative">
				<div id="map"></div>
				<script>var exports = {};</script>
				<script src="../static/js/map.js"></script>
			</div>
		</div>
	</div>
</div>
{% endblock %}