{% extends "base.html" %}

{% block html_title %}Tweet Finder | DAGEAâ„¢{% endblock %}

{% block main_content %}
<!-- Title -->
<div class="container p-3">
	<div class="text-center">
		<h1 class="display-3 pb-2">GUI to search tweets</h1>
	</div>
</div>

<!-- Filter and search -->
<div class="container mt-4">
	<form class="d-flex justify-content-between align-items-center w-100" action="" method="post">
		<div class="row">

			<!-- Search bar -->
			<div class="d-flex w-75">
				<input type="text" class="form-control" style="max-width: 60%" placeholder="Search tweets"
					name="keyword" id="keyword" value="{{ request.form['keyword'] }}">
				<div class="btn-group" role="group" aria-label="Basic radio toggle button group">
					<input type="radio" class="btn-check" name="btnradio" id="searchBtn" autocomplete="off"
						value="Search">
					<label class="btn btn-outline-primary bi-search" for="searchBtn" title="Search Tweets"></label>

					<input type="radio" class="btn-check" name="btnradio" id="streamBtn" autocomplete="off"
						value="Stream">
					<label class="btn btn-outline-danger bi-play-fill" for="streamBtn" title="Stream Tweets"></label>
				</div>
				<button type="submit" class="btn btn-success" style="margin: 1px;">Invia</button>
			</div>

			<!-- Research by -->
			<div class="d-flex">
				<select name="researchBy" class="form-select" aria-label="Default select example">
					{% for method in researchMethods %}
					{% if method.method == currentResearchMethod %}
					<option selected value="{{ method.method }}">{{ method.text }}</option>
					{% else %}
					<option value="{{ method.method }}">{{ method.text }}</option>
					{% endif %}
					{% endfor %}
				</select>
			</div>

			<!-- Tweets limit -->
			<div class="col-2">
				<input class="form-control" id="tweetsLimitInput" value="{{ tweetsLimit }}" min="0" max="200"
					type="number" name="tweetsLimit">
				<small class="form-text text-muted">Choose the number of tweets to display</small>
			</div>

			<!-- Location check -->
			<div class="col-1 m-1 me-4">
				<div class="form-check form-switch align-items-center">
					<input class="form-check-input" type="checkbox" name="isLocated" />
					<label class="form-check-label" for="flexSwitchCheckDefault">Location</label>
				</div>
			</div>
		</div>
	</form>
</div>
<br><br>


<div class="row align-items-baseline justify-content-around h-100 w-100">
	<div class="col d-flex">
		<!-- Cards tweets -->
		<div class="container d-flex h-100 pt-5 text-dark">
			<div class="row justify-content-center mb-3">
				{% for tweet in tweetCards %}
				<div class="col-lg-4">
					<div class="card" style="width: 90%; margin: 2%">
						<div class="card-body">
							<h3 class="card-title">{{ tweet.user }}</h3>
							<p class="card-text">{{ tweet.text }}</p>
							<p class="card-text">{{ tweet.date }}</p>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
	</div>
	<!-- Map -->
	<div class="card col d-flex bg-secondary h-100" style="margin: 2pt">
		<div class="card-body h-100">
			<h2 class="card-title">Tweet by Location</h2>
			<div class="map-container h-100" style="position: relative">
				<div id="map"></div>
				<script>var exports = {};</script>
				<script src="../static/js/map.js"></script>
			</div>
		</div>
	</div>
</div>

{% endblock %}